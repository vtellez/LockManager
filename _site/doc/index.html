<!DOCTYPE html>
<!--[if IE 8 ]> <html lang="en" class="ie8"> <![endif]-->
<!--[if (gt IE 8)]><!--> <html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8" />
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
    <title>BringBack  - Documentation </title>
  <meta content="BringBack app website" name="description" />
  <!--
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
-->
  <meta content="yes" name="apple-mobile-web-app-capable" />
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <script src="javascripts/PIE.js"></script>
  <![endif]-->
  <link href="http://bringback.info/images/favicon.ico" rel="shortcut icon" />
<link href="http://bringback.info/images/apple-touch-icon-144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144" />
<link href="http://bringback.info/images/apple-touch-icon-114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114" />
<link href="http://bringback.info/images/apple-touch-icon-72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72" />
<link href="http://bringback.info/images/apple-touch-icon-57-precomposed.png" rel="apple-touch-icon-precomposed" />
  <link href="http://bringback.info/stylesheets/bootstrap.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="http://bringback.info/stylesheets/responsive.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="http://bringback.info/stylesheets/font-awesome.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="http://bringback.info/stylesheets/theme.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="http://bringback.info/stylesheets/fonts.css" media="screen" rel="stylesheet" type="text/css" />
   <link href="http://bringback.info/stylesheets/pricing.css" media="screen" rel="stylesheet" type="text/css" />
<link href='http://fonts.googleapis.com/css?family=Rancho' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Handlee' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
</head>
<body  data-spy="scroll" data-target=".bs-docs-sidenav" >
  <div class="wrapper">
    <!-- Main Content -->
    <div id="content" role="main">  <!-- Page Header -->
    <header id="masthead">
      <nav class="navbar navbar-static-top ">
        <div class="navbar-inner">
          <div class="container-fluid">
            <h1 class="logo">
              <a href="http://bringback.info/">
              <span class="icon-stack" style="font-size:32px; margin-top:-10px; margin-bottom:6px; margin-right:0px; color:#72b9d3">
                <i class="icon-cloud icon-stack-base"></i>               
                <i class="icon-reply icon-flip-vertical icon-flip-horizontal" style="color:#f8f8f8; font-size:32px; margin-top:4px;"></i>        
              </span>
              <font style="color:#72b9d3;">BringBack</font>
                </a>              
            </h1>
            <div class="nav-collapse collapse">
              <ul class="nav pull-right" style="margin-top:10px;">
                <li ><a 
                    href="http://bringback.info/">Features</a></li>
                <li ><a 
                    href="http://bringback.info/download">Download</a></li>
                <li ><a 
                    href="http://bringback.info/pricing">Pricing</a></li>
                <li class="active"><a
                    href="http://bringback.info/doc">Doc</a></li>
                <li ><a
                    href="http://bringback.info/contact">Contact</a></li>
              </ul>
            </div>
          </div>
        </div>
      </nav>
    </header>    
        <!-- Promo Section -->
<section class="section section-alt section-padded">
        <div class="container-fluid">
          <div class="row-fluid">
            <div class="section-header">
            <h1 class="section-title">              
              Documentation
            </h1>
            </div>
          </div>
          <div class="row-fluid">

            <div class="span12">
 <p class="lead text-center">
  <img src="http://bringback.info/images/document.png"/><br/>
      Check the technical documentation for installing and setup BringBack
    </p>
            </div>
          </div>
        </div>
      </section>

<!-- Latest News -->
<section class="section section-padded">
  <div class="container-fluid">
    <div class="row-fluid">

      <div class="span3">

<div class="accordion" id="accordion2" data-spy="affix" data-offset-top="520" style="min-width:245px;"><br/>
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
        Introduction
      </a>
    </div>
    <div id="collapseOne" class="accordion-body collapse in">
      <div class="accordion-inner">
        <ul class="nav nav-list bs-docs-sidenav">
          <li><a href="#definition"><i class="icon-chevron-right"></i> Definition</a></li>
          <li><a href="#how"><i class="icon-chevron-right"></i> How it works</a></li>
          <li><a href="#license"><i class="icon-chevron-right"></i> License</a></li>
        </ul>
      </div>
    </div>
  </div>
 <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#install">
        Installation
      </a>
    </div>
    <div id="install" class="accordion-body collapse">
      <div class="accordion-inner">
         <ul class="nav nav-list bs-docs-sidenav">
          <li><a href="#prerequisites"><i class="icon-chevron-right"></i> Prerequisites</a></li>
          <li><a href="#download"><i class="icon-chevron-right"></i> Download</a></li>
          <li><a href="#deploy"><i class="icon-chevron-right"></i> Deploy</a></li>
          <li><a href="#create_database"><i class="icon-chevron-right"></i> Create database</a></li>
        </ul>
      </div>
    </div>
  </div>

 <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#config">
        Configuration
      </a>
    </div>
    <div id="config" class="accordion-body collapse">
      <div class="accordion-inner">
         <ul class="nav nav-list bs-docs-sidenav">
          <li><a href="#general_config"><i class="icon-chevron-right"></i> General config</a></li>
          <li><a href="#database_config"><i class="icon-chevron-right"></i> Database config</a></li>
          <li><a href="#language_config"><i class="icon-chevron-right"></i> Language config</a></li>
          <li><a href="#scripts_config"><i class="icon-chevron-right"></i> Scripts config</a></li>
          <li><a href="#logs_config"><i class="icon-chevron-right"></i> Logs config</a></li>
          <li><a href="#ssh_config"><i class="icon-chevron-right"></i> SSH config</a></li>
          <li><a href="#crontab_config"><i class="icon-chevron-right"></i> Crontab config</a></li>
        </ul>
      </div>
    </div>
  </div>

 <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#oper">
     Procedures
      </a>
    </div>
    <div id="oper" class="accordion-body collapse">
      <div class="accordion-inner">
         <ul class="nav nav-list bs-docs-sidenav">
          <li><a href="#overview"><i class="icon-chevron-right"></i> Manual update (term)</a></li>
          <li><a href="#overview"><i class="icon-chevron-right"></i> Manual update (web)</a></li>
          <li><a href="#overview"><i class="icon-chevron-right"></i> Load custom date</a></li>
        </ul>
      </div>
    </div>
  </div>


 <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#devel">
        Development
      </a>
    </div>
    <div id="devel" class="accordion-body collapse">
      <div class="accordion-inner">
         <ul class="nav nav-list bs-docs-sidenav">
          <li><a href="#overview"><i class="icon-chevron-right"></i> Custom development</a></li>
          <li><a href="#transitions"><i class="icon-chevron-right"></i> API documentation</a></li>
        </ul>
      </div>
    </div>
  </div>

<div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#others">
        Others
      </a>
    </div>
    <div id="others" class="accordion-body collapse">
      <div class="accordion-inner">
         <ul class="nav nav-list bs-docs-sidenav">
          <li><a href="#modals"><i class="icon-chevron-right"></i> User guide</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>


      </div>
 
      <div class="span9">
<br/>
         <h1>Introduction</h1>
                        <section id="definition"><br/>
                        <section id="how"><br/>
                          <p>
                            BringBack processes remote log files (obtained through web services or via ssh) to analyze them and keep important information in the database server and serve it through an intuitive web interface for users.
                            </p>
                            <br/><img class="img-polaroid" src="http://bringback.info/images/assets/func_b.png"/><br/>
                          </p>
                          <pre class="code"><center>This is how BringBack works</center></pre><br/>
                          <p>
                            BringBack interpret and crosslink information between logs of different software programs. In addition, you can customize what software we want to analyze, making the application is certainly very flexible and functioanl.
                          </p>

                        <section id="license"><br/>

                        <hr class="invisible" />


                    <h1>Installation </h1>

                        <section id="prerequisites"><br/>
                      <h2>Prerrequisitos</h2>

                <p>BringBack necesita una máquina con sistema operativo <b>GNU/Linux</b> para funcionar. Las especificaciones ténicas de la máquina (CPU, GB de memoria RAM, GB de disco duro, etc., dependerán del volumen de correo que se registre en la institución/organismo donde se esté instalando la aplicación).</p>

                <p>Software necesario en la máquina (versiones mínimas):</p>
                <pre>
                <ul>
                  <li>PHP v5.1.6</li>
                  <li>MySQL v5.0.77</li>
                  <li>Paquetes necesarios para comunicar PHP con MySQL</li>
                  <li>Servidor web para php (por ejemplo Apache)</li>
                  <li>PERL v5.8.8</li>
                  <li>Módulos de Perl: 
                    <li>- Encode</li>
                    <li>- Time::Local qw(timelocal)</li>
                    <li>- POSIX qw(strftime);</li>
                    <li>- MIME::Words qw(:all)</li>
                    <li>- Time::TAI64 qw/tai2unix/</li>
                    <li>- DBI</li>
                  </li>
                </ul>
                </pre>
                        <section id="license"></br>
                        <section id="download"></br>
                      <h2>Download BringBack</h2>

                <p>BringBack puede descargarse de dos formas:</p>
                <br/>
                <p><b>1)</b> Descargando directamente la <b>versión empaquetada en tar.gz</b> de la última release estable:</b></p>
                <pre><i class="icon-download-alt"></i> <a href="http://github.com/vtellez/BringBack/tarball/master">Descargar tar.gz</a></pre>
                <br/>
                <p><b>2)</b> Utilizando el <b>sistema de versiones (git)</b> del proyecto en github:</b></p>
                <pre>git://github.com/vtellez/BringBack.git</pre>

                <p>ó</p>

                <pre>https://github.com/vtellez/BringBack.git</pre>


                        <section id="deploy"><br/>
                      <h2>Variables y nomenclatura</h2>
                    <p>En adelante, usaremos los siguientes términos y variables en esta página de documentación:</p>
                    
                    <pre>
                    <ul>
                    <li><b>$PATH_A_BringBack</b>: Esta variable hace referencia a la ruta donde se ha desplegado la instalación. <br/>Por ejemplo, la ruta podría ser <code>/var/www/BringBack</code></li>
                    </ul>
                    </pre>

                        <section id="create_database"><br/>
                      <h2>Creación de la base de datos</h2>
                      
                      <p>Creación del usuario en MySQL para BringBack de mensajes</p>
                <pre>
                 # mysql -uroot -p<br/>
                 Enter password: (el de root)
                 </pre>
                 <pre>
                 mysql> GRANT ALL PRIVILEGES ON BringBack.* TO BringBack@localhost
                        IDENTIFIED BY 'password-de-BringBack';
                 </pre>
                 <pre>
                 mysql> CREATE DATABASE BringBack;
                 </pre>
                 <pre>
                 mysql> FLUSH PRIVILEGES;
                 </pre>

                <p>Creación de las tablas de BringBack de mensajes</p>
                <pre>
                 # mysql -uBringBack -p BringBack < $PATH_A_BringBack/mysql-database/schema.sql
                 </pre>
                      


                        <section id="pill-tab3"></br>
                      <h1>Configuration</h1>
                <p>Para la puesta en marcha de aplicación se deberán modificar ciertos ficheros de configuración.</p>
                        <br/> 
                        <section id="general_config"><br/>
                      <h2>Configuración general (config.php)</h2>

                <p>$PATH_A_BringBack/app/config/config.php.plantilla: Debe eliminarse de la extensión el sufijo ".plantilla". Configurar este fichero para definir la dirección base de la aplicación, la lista de administradores, número de mensajes por página, etc etc. Crear directorio de logs de acuerdo a lo configurado en este fichero.</p>

                        <br/>  
                        <section id="database_config"><br/>
                      <h2>Configuación de la base de datos (database.php)</h2>

                <p>$PATH_A_BringBack/app/config/database.php.plantilla: Debe eliminarse de la extensión el sufijo ".plantilla". Este fichero incluye la información relativa a la base de datos de la aplicación así como al usuario para ésta, para permitir así la conexión desde php.</p>

                        <br/>  
                        <section id="scripts_config"><br/>
                      <h2>Configuración de logs y scripts (config.pl)</h2>

                <p>$PATH_A_BringBack/scripts/etc/config.pl.plantilla: Debe eliminarse de la extensión el sufijo ".plantilla". Este fichero incluye información acerca del proceso de parseado de los logs: Definición del dominio principal de la institución, tiempo de vida (en días) de los mensajes en la base de datos, configuración de datos para la conexión con la base de datos desde perl, etc.</p>

                        <section id="logs_config"><br/>
                <p>$PATH_A_BringBack/scripts/etc/hosts.plantilla: Debe eliminarse de la extensión el sufijo ".plantilla". En este fichero debe incluirse la información de los logs que se quiera procesar. En el propio fichero esta incluido un ejemplo para comprender la sintaxis que se utiliza en el.</p>

                <p>$PATH_A_BringBack/scripts/bin/actualiza.sh: En este fichero tan solo debe editarse la primera línea no comentada, que hace referencia a la ruta donde se encuentra alojado el directorio "scripts".</p>


                        <section id="ssh_config"><br/>
                      <h2>Configuración sshs</h2>
                <p>BringBack de mensajes obtiene los logs de las máquinas de forma remota utilizando un protocolo de transmisión de ficheros segura basado en el protocolo ssh (comando scp).</p>

                <p>Es por ello que para que el script principal funcione correctamente, debemos dar permiso a las máquinas remotas para que BringBack obtenga los logs sin necesidad de establecer un usuario y contraseña. Para ello, se utiliza los certificados de clave pública de la propia máquina.</p>

                <p>Deberemos copiar la clave pública de la máquina que procesará los logs (alojada generalmente en $HOME/.ssh/id_rsa.pub) en la lista de servidores autorizados en las máquinas remotas (definidas normalmente en el archivo $HOME/.ssh/authorized_keys)</p>

                        <section id="crontab_config"><br/>
                      <h2>Configuración crontab</h2>

                <p>BringBack de mensajes, requiere que se añadan varias entradas en la lista de tareas automáticas del sistema:</p>
                <pre>
                #BringBack: Ejecución del script que recorre los logs de correo y los guarda en la base de datos<br/>
                */10 0-4,6-23 * * * bash $PATH_A_BringBack/scripts/bin/actualiza.sh hosts > /tmp/salida<br/>
                <br/>
                #BringBack: Cada dia borramos los mensajes y accesos más antiguos la base de datos<br/>
                1 5 * * * bash $PATH_A_BringBack/scripts/bin/borrado_bbdd.sh<br/>
 
               <br/>
                #BringBack: Calculo de indicadores por horas/días/meses<br/>
                7 0 * * * perl $PATH_A_BringBack/scripts/bin/indicadores.pl<br/>
                </pre>

                <p>La primera de ellas hace referencia a la frecuencia con la que se quiere que se lean los logs de las distintas máquinas. Dicho de otra forma, con que margen de tiempo con respecto al tiempo real, queremos que se actualicen los datos en la base de datos. En este ejemplo, la frecuencia de parseo sería cada 10 minutos.</p>

                <p>La segunda entrada, debe ejecutarse una vez al día, y será la encargada de eliminar aquellos mensajes con más de X días (configurado en /scripts/etc/config.pl) de antigüedad.</p>

                <p>La última entrada se ejecuta una vez al día y se encarga de calcular los datos necesarios para los indicadores diarios de la aplicación.</p>

      </div>
 </div>
</section>

    </div>
  </div>
  <!-- Page Footer -->
  <footer id="footer" role="contentinfo">
    <div class="wrapper wrapper-transparent">
      <div class="container-fluid">
        <div class="row-fluid">
          <div class="span6 small-screen-center">
            <h2 style="text-transform:none;">
              <a href="http://bringback.info/">
                BringBack
              </a>
               &nbsp;&nbsp;
              <a data-iconcolor="#42576a" href="https://github.com/vtellez/BringBack">
                  <i class="icon-github"></i>
                </a>  
                &nbsp;&nbsp;
                <a data-iconcolor="#3b5998" href="https://www.facebook.com/pages/Bringback/581091168578902">
                  <i class="icon-facebook-sign"></i>
                </a>
                &nbsp;&nbsp;
                <a data-iconcolor="#00a0d1" href="http://twitter.com/BringBack_app">
                  <i class="icon-twitter"></i>
                </a>                              
            </h3>
            <p>Released under 
            <a href="http://www.gnu.org/licenses/agpl-3.0.html" target="_blank">GNU Affero General Public License</a></p>
          </div>
          <div class="span6">

            <ul class="unstyled inline text-right small-screen-center big social-icons">
                <a data-iconcolor="#42576a" href="#">
                  <i class="icon-arrow-up"></i> to top
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <script src="http://bringback.info/javascripts/jquery.min.js" type="text/javascript"></script>
  <script src="http://bringback.info/javascripts/bootstrap.js" type="text/javascript"></script>
  <script src="http://bringback.info/javascripts/jquery.flexslider-min.js" type="text/javascript"></script>
  <script src="http://bringback.info/javascripts/jquery.tweet.js" type="text/javascript"></script>
  <script src="http://bringback.info/javascripts/script.js" type="text/javascript"></script>


<!-- Add fancyBox main JS and CSS files -->
  <script type="text/javascript" src="http://bringback.info/javascripts/fancy/source/jquery.fancybox.js?v=2.1.4"></script>
  <link rel="stylesheet" type="text/css" href="http://bringback.info/javascripts/fancy/source/jquery.fancybox.css?v=2.1.4" media="screen" />    

    <script type="text/javascript">
        $(document).ready(function() {
            /*
             *  Simple image gallery. Uses default settings
             */

            $('.fancybox').fancybox();

        });
    </script>
</body>